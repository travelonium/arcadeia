<VirtualHost *:*>
    RequestHeader set "X-Forwarded-Proto" expr=%{REQUEST_SCHEME}
</VirtualHost>

<VirtualHost *:80>
    ProxyPreserveHost On
    ProxyPass /search http://solr:8983/solr/Library/select
    ProxyPassReverse /search http://solr:8983/solr/Library/select
    ProxyPass / http://kestrel:80/
    ProxyPassReverse / http://kestrel:80/
    ServerName www.example.com
    ServerAlias *.example.com
    ErrorLog /proc/1/fd/2
    CustomLog /proc/1/fd/1 extended
    LogFormat "%h %l %u %t \"%r\" %p %>s \"%{User-Agent}i\" %O %{ms}T" extended
</VirtualHost>
